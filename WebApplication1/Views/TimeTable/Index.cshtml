@model AMS.Models.ViewModels.TimetableFilterViewModel
@{
    ViewData["Title"] = "Timetables";
}

<div class="rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6">
    <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white/90">
            Timetables
        </h3>
        <a asp-action="Create" class="flex items-center justify-center gap-2 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600 active:bg-brand-700">
            <svg class="fill-current" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.0002 4.16675C10.4604 4.16675 10.8335 4.53984 10.8335 5.00008V9.16675H15.0002C15.4604 9.16675 15.8335 9.53984 15.8335 10.0001C15.8335 10.4603 15.4604 10.8334 15.0002 10.8334H10.8335V15.0001C10.8335 15.4603 10.4604 15.8334 10.0002 15.8334C9.53993 15.8334 9.16683 15.4603 9.16683 15.0001V10.8334H5.00016C4.53993 10.8334 4.16683 10.4603 4.16683 10.0001C4.16683 9.53984 4.53993 9.16675 5.00016 9.16675H9.16683V5.00008C9.16683 4.53984 9.53993 4.16675 10.0002 4.16675Z" fill=""></path>
            </svg>
            Add Timetable
        </a>
    </div>

    <!-- Filter -->
    <form method="get" class="mt-6">
        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
            <div>
                <label asp-for="SemesterId" class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">
                    Semester
                </label>
                <select asp-for="SemesterId" asp-items="ViewBag.Semesters" class="w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:border-brand-500 focus:ring-0 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-gray-500">
                    <option value="">All Semesters</option>
                </select>
            </div>
            <div>
                <label asp-for="BatchId" class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">
                    Batch
                </label>
                <select asp-for="BatchId" asp-items="ViewBag.Batches" class="w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:border-brand-500 focus:ring-0 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-gray-500">
                    <option value="">All Batches</option>
                </select>
            </div>
            <div>
                <label asp-for="Status" class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">
                    Status
                </label>
                <select asp-for="Status" class="w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:border-brand-500 focus:ring-0 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-gray-500">
                    <option value="">All</option>
                    <option value="Active">Active</option>
                    <option value="Inactive">Inactive</option>
                </select>
            </div>
            <div class="flex items-end">
                <button type="submit" class="flex w-full items-center justify-center gap-2 rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600 active:bg-brand-700">
                    <svg class="fill-current" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M3.3335 9.16675C3.3335 5.48485 6.31826 2.50008 10.0002 2.50008C13.6821 2.50008 16.6668 5.48485 16.6668 9.16675C16.6668 12.8486 13.6821 15.8334 10.0002 15.8334C6.31826 15.8334 3.3335 12.8486 3.3335 9.16675ZM10.0002 1.25008C5.62793 1.25008 2.0835 4.7945 2.0835 9.16675C2.0835 13.539 5.62793 17.0834 10.0002 17.0834C14.3724 17.0834 17.9168 13.539 17.9168 9.16675C17.9168 4.7945 14.3724 1.25008 10.0002 1.25008ZM13.0164 11.95C13.3093 11.6571 13.3093 11.1822 13.0164 10.8893C12.7235 10.5964 12.2487 10.5964 11.9558 10.8893L9.32316 13.5219L8.04283 12.2416C7.74994 11.9487 7.27506 11.9487 6.98217 12.2416C6.68928 12.5345 6.68928 13.0094 6.98217 13.3023L8.79283 15.1129C8.93349 15.2536 9.12425 15.3326 9.32316 15.3326C9.52208 15.3326 9.71284 15.2536 9.8535 15.1129L13.0164 11.95Z" fill=""></path>
                    </svg>
                    Filter
                </button>
            </div>
        </div>
    </form>

    <!-- Table -->
    <div class="mt-6 overflow-x-auto">
        <table class="w-full min-w-[600px] border-collapse text-left">
            <thead>
                <tr class="border-b border-gray-200 dark:border-gray-800">
                    <th class="px-4 py-3 text-sm font-medium text-gray-500 dark:text-gray-400">Batch</th>
                    <th class="px-4 py-3 text-sm font-medium text-gray-500 dark:text-gray-400">Semester</th>
                    <th class="px-4 py-3 text-sm font-medium text-gray-500 dark:text-gray-400">Status</th>
                    <th class="px-4 py-3 text-sm font-medium text-gray-500 dark:text-gray-400">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Timetables)
                {
                    <tr class="border-b border-gray-200 last:border-0 dark:border-gray-800">
                        <td class="px-4 py-3 text-sm text-gray-800 dark:text-white/90">
                            @item.Batch?.BatchName
                        </td>
                        <td class="px-4 py-3 text-sm text-gray-800 dark:text-white/90">
                            @item.Semester?.Year - @item.Semester?.StartDate
                        </td>
                        <td class="px-4 py-3 text-sm">
                            @if (item.IsActive == true)
                            {
                                <span class="inline-flex items-center rounded-full bg-success-50 px-2 py-1 text-xs font-medium text-success-500 dark:bg-success-500/15">
                                    Active
                                </span>
                            }
                            else
                            {
                                <span class="inline-flex items-center rounded-full bg-error-50 px-2 py-1 text-xs font-medium text-error-500 dark:bg-error-500/15">
                                    Inactive
                                </span>
                            }
                        </td>
                        <td class="px-4 py-3 text-sm">
                            <div class="flex items-center gap-2">
                                <a asp-action="Details" asp-route-id="@item.TimetableId" class="text-gray-500 hover:text-brand-500 dark:text-gray-400 dark:hover:text-brand-500" title="View">
                                    <svg class="fill-current" width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10 4.16675C5.83333 4.16675 2.275 6.75841 0.833333 10.4167C2.275 14.0751 5.83333 16.6667 10 16.6667C14.1667 16.6667 17.725 14.0751 19.1667 10.4167C17.725 6.75841 14.1667 4.16675 10 4.16675ZM10 14.5834C7.69167 14.5834 5.83333 12.7251 5.83333 10.4167C5.83333 8.10841 7.69167 6.25008 10 6.25008C12.3083 6.25008 14.1667 8.10841 14.1667 10.4167C14.1667 12.7251 12.3083 14.5834 10 14.5834ZM10 7.91675C8.61667 7.91675 7.5 9.03341 7.5 10.4167C7.5 11.8001 8.61667 12.9167 10 12.9167C11.3833 12.9167 12.5 11.8001 12.5 10.4167C12.5 9.03341 11.3833 7.91675 10 7.91675Z" fill="" />
                                    </svg>
                                </a>
                                <a asp-action="Edit" asp-route-id="@item.TimetableId" class="text-gray-500 hover:text-brand-500 dark:text-gray-400 dark:hover:text-brand-500" title="Edit">
                                    <svg class="fill-current" width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M17.2583 5.92508L14.075 2.74175C13.9167 2.58341 13.7083 2.50008 13.5 2.50008C13.2917 2.50008 13.0833 2.58341 12.925 2.74175L11.0417 4.62508L15.375 8.95841L17.2583 7.07508C17.575 6.75841 17.575 6.24175 17.2583 5.92508ZM2.5 13.1667V17.5001H6.83333L14.1917 10.1417L9.85833 5.80841L2.5 13.1667Z" fill="" />
                                    </svg>
                                </a>
                                <form asp-action="Delete" asp-route-id="@item.TimetableId" method="post" onsubmit="return confirm('Are you sure you want to delete this timetable?');" class="inline">
                                    <button type="submit" class="text-gray-500 hover:text-error-500 dark:text-gray-400 dark:hover:text-error-500" title="Delete">
                                        <svg class="fill-current" width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.1667 4.16675H12.5V2.50008C12.5 1.58341 11.75 0.833415 10.8333 0.833415H9.16667C8.25 0.833415 7.5 1.58341 7.5 2.50008V4.16675H5.83333C5.375 4.16675 5 4.54175 5 5.00008C5 5.45841 5.375 5.83341 5.83333 5.83341H14.1667C14.625 5.83341 15 5.45841 15 5.00008C15 4.54175 14.625 4.16675 14.1667 4.16675ZM9.16667 2.50008H10.8333V4.16675H9.16667V2.50008ZM5.83333 7.50008V15.8334C5.83333 16.7501 6.58333 17.5001 7.5 17.5001H12.5C13.4167 17.5001 14.1667 16.7501 14.1667 15.8334V7.50008H5.83333ZM8.33333 9.16675C8.33333 8.70841 8.70833 8.33341 9.16667 8.33341C9.625 8.33341 10 8.70841 10 9.16675V14.1667C10 14.6251 9.625 15.0001 9.16667 15.0001C8.70833 15.0001 8.33333 14.6251 8.33333 14.1667V9.16675ZM12.5 8.33341C12.9583 8.33341 13.3333 8.70841 13.3333 9.16675V14.1667C13.3333 14.6251 12.9583 15.0001 12.5 15.0001C12.0417 15.0001 11.6667 14.6251 11.6667 14.1667V9.16675C11.6667 8.70841 12.0417 8.33341 12.5 8.33341Z" fill="" />
                                        </svg>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
